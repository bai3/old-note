# 第三章 HTTP报文内的HTTP信息

## 3.1 HTTP报文

用于HTTP协议交互的信息被称为HTTP报文。

HTTP报文大致可分为报文首部和报文主体两块，两者由最初出现的空行划分。通常并不一定要有报文主体。

| 报文首部 | 服务器端或客户端需处理的请求或响应的内容及属性 |
| :--: | ----------------------- |
|  空行  |                         |
| 报文主体 | 应被发送的数据                 |

## 3.2 请求报文及响应报文的结构

请求报文和响应报文的首部内容由以下数据组成

- 请求行

  包含用于请求的方法，请求URI和HTTP版本。

- 状态行

  包含表明响应结果的状态码，原因短语和HTTP版本

- 首部字段

  包含表示请求和响应的各种条件和属性的各类首部

  一般有4种首部，分别是：通用首部、请求首部、响应首部和实体首部

- 其他

  可能包含HTTP的RFC里定义的首部（Cookie等）

## 3.3 编码提升传输速度

### 3.3.1 报文主体和实体主体的差异

- 报文

  是HTTP通信的基本单位，由8位字节流组成，通过HTTP通信传输

- 实体

  作为请求或响应的有效载荷数据被传输，其内容由实体首部和实体主体组成
  HTTP报文的主体用于传输请求或响应的实体主体
  通常，报文主体等于实体主体。只有当传输中进行编码操作时候，实体主体的内容发生变化，才导致它和报文主体产生差异
###3.3.2压缩传输的内容编码

内容编码指明应用在实体内容上的编码格式，并保持实体信息原样压缩。内容编码后的实体有客户端接收并负责解码

### 3.3.3 分割发送的分块传输编码

在传输大容量数据时，会通过数据分割成多块，能顾让浏览器逐步显示页面

> 这种把实体主体分块的功能称为分块传输编码

## 3.5获取部分内容的范围请求

要实现该功能需要指定下载的实体范围。像这样，指定范围发送的请求叫做范围请求

执行范围请求时，会用到首部字段Range来指定资源的byte范围

## 3.6 内容协商返回最合适的内容

**内容协商机制是指客户端和服务器端就响应的资源内容进行交涉，然后提供给客户端最为适合的资源。**

内容协商会以响应资源的语言、字符集、编码方式等作为判别的基准。